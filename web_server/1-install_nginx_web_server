#!/usr/bin/env bash
# This script installs and configures nginx on a new Ubuntu server.

# Update package list and install nginx
sudo apt-get update -y
sudo apt-get install nginx -y

# Allow 'Nginx HTTP' through the firewall
sudo ufw allow 'Nginx HTTP'

# Start nginx without using systemctl
sudo service nginx start

# Create an index.html page with the required content
echo "Holberton School" | sudo emacs /var/www/html/index.html

# Restart nginx to load the new page
sudo service nginx restart

# Check that nginx is running and listening on port 80
sudo ss -tuln | grep ':80'

# Verify the content and the response code
curl -s http://localhost | grep "Holberton School"
curl -s -o /dev/null -w "%{http_code}\n" http://localhost